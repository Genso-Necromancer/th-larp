[gd_scene load_steps=4 format=3 uid="uid://dtt1es8lctsrv"]

[ext_resource type="PackedScene" uid="uid://cmvmjk0jj7dam" path="res://scenes/Gameboard.tscn" id="1_1o3kx"]
[ext_resource type="Script" uid="uid://ci7bvot3e5ktr" path="res://scenes/map_manager.gd" id="1_o0i0e"]
[ext_resource type="PackedScene" uid="uid://r6wtvva5qput" path="res://scenes/GUIManager.tscn" id="2_3ng14"]

[node name="mapManager" type="Node" groups=["Persist"]]
script = ExtResource("1_o0i0e")

[node name="Gameboard" parent="." instance=ExtResource("1_1o3kx")]
unique_name_in_owner = true

[node name="Cursor" parent="Gameboard" index="1"]
position = Vector2(0, 0)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
unique_name_in_owner = true
follow_viewport_scale = 0.001

[node name="GUIManager" parent="CanvasLayer" instance=ExtResource("2_3ng14")]
unique_name_in_owner = true
mapCursorPath = NodePath("../../Gameboard/Cursor")

[node name="AudioHub" parent="CanvasLayer/GUIManager" index="7" node_paths=PackedStringArray("audio_players")]
audio_players = {
"Confirm": NodePath("Confirm"),
"Deny": NodePath("Deny"),
"FocusChange": NodePath("FocusChange")
}

[connection signal="time_factor_changed" from="Gameboard/CombatManager" to="Gameboard" method="_on_combat_manager_time_factor_changed"]
[connection signal="warp_selected" from="Gameboard/CombatManager" to="Gameboard" method="_on_combat_manager_warp_selected"]
[connection signal="deploy_toggled" from="CanvasLayer/GUIManager" to="Gameboard" method="_on_gui_manager_deploy_toggled"]
[connection signal="map_started" from="CanvasLayer/GUIManager" to="Gameboard" method="_on_gui_manager_map_started"]
[connection signal="win_finished" from="CanvasLayer/GUIManager/WinScreen" to="." method="_on_win_screen_win_finished"]
[connection signal="win_finished" from="CanvasLayer/GUIManager/WinScreen" to="Gameboard" method="_on_win_screen_win_finished"]
[connection signal="win_finished" from="CanvasLayer/GUIManager/WinScreen" to="CanvasLayer/GUIManager" method="_on_win_screen_win_finished"]
[connection signal="exp_finished" from="CanvasLayer/GUIManager/ExpGain" to="Gameboard" method="_on_exp_gain_exp_finished"]

[editable path="Gameboard"]
[editable path="Gameboard/Cursor"]
[editable path="Gameboard/Cursor/MapCamera"]
[editable path="CanvasLayer/GUIManager"]
[editable path="CanvasLayer/GUIManager/Fader"]
